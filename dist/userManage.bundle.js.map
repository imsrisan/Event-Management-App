{"version":3,"file":"userManage.bundle.js","mappings":"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","sources":["webpack://eventmanagement/./repo/userlist.ts","webpack://eventmanagement/webpack/bootstrap","webpack://eventmanagement/./admin-modules/userManage.ts"],"sourcesContent":["import { User } from \"../interfaces/User\";\r\n\r\n\r\nexport function getUsers() : User[]{\r\n\r\n    const users = localStorage.getItem('users');\r\n    return users ? JSON.parse(users) : [];\r\n}\r\n\r\nexport function setUsers(newUser : User) : boolean{\r\n    const users = getUsers();\r\n    if(users.find(u => u.email === newUser.email)){\r\n        return false;\r\n    } else {\r\n        users.push(newUser);\r\n        localStorage.setItem('users', JSON.stringify(users));\r\n        return true;\r\n    }\r\n}\r\n\r\nexport function updatedUser(users : User[]){\r\n    localStorage.setItem('users', JSON.stringify(users));\r\n    console.log(\"done\");\r\n}\r\n\r\nexport function getUserById(id : string) : User | null{\r\n    const users = getUsers();\r\n    const user = users.find(u => u.id === id);\r\n    return user? user : null;\r\n}\r\n\r\nfunction filterByid(id : string) : User[]{\r\n    const users = getUsers();\r\n    return users.filter(u => u.id !== id);\r\n}\r\n\r\nexport function updateUser(user : User, id : string) : void {\r\n    const users = filterByid(id);\r\n    users.push(user);\r\n    updatedUser(users);\r\n}\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { User } from \"../interfaces/User\";\r\nimport { getUsers, updatedUser } from \"../repo/userlist\";\r\n\r\nconst admin = sessionStorage.getItem('admin');\r\n\r\n\r\nconst username = document.querySelector(\".admin\") as HTMLDivElement;\r\nusername.innerHTML = `<p>${admin}</p>`;\r\n\r\nif(admin){\r\n    const users = document.querySelector(\".list\") as HTMLDivElement;\r\n    \r\n    const categoryPage = document.querySelector(\".category\") as HTMLButtonElement;\r\n    \r\n    categoryPage.addEventListener(\"click\", function(){\r\n        window.location.href=\"./add-category.html\";\r\n    });\r\n    \r\n    const addUser = document.getElementById(\"add-user\") as HTMLButtonElement;\r\n    \r\n    addUser.addEventListener(\"click\", function(){\r\n        window.location.href=\"./add-user.html\";\r\n    })\r\n    \r\n    let userList : User[] = getUsers();\r\n    \r\n    displayUsers(userList);\r\n    \r\n    function displayUsers(userList : User[]){\r\n        users.innerHTML = '';\r\n        userList.forEach(u =>{\r\n            const parent = document.createElement(\"div\");\r\n            parent.classList.add(\"parent\");\r\n            const left = document.createElement(\"div\");\r\n            left.classList.add(\"left\");\r\n            const right = document.createElement(\"div\");\r\n            right.classList.add(\"right\");\r\n    \r\n            const userid = document.createElement(\"div\");\r\n            userid.textContent = u.role;\r\n            parent.setAttribute(\"userId\", u.id);\r\n            const username = document.createElement(\"div\");\r\n            username.textContent = u.username;\r\n            const useremail = document.createElement(\"div\");\r\n            parent.setAttribute(\"email\", u.email);\r\n            useremail.textContent = u.email;\r\n            const useredit = document.createElement(\"div\");\r\n            useredit.innerHTML = `<button class=\"edit\">Edit</button>`;\r\n            const userdelete = document.createElement(\"div\");\r\n            userdelete.innerHTML = `<button class=\"delete\">Delete</button>`;\r\n            left.appendChild(userid);\r\n            left.appendChild(username);\r\n            left.appendChild(useremail);\r\n            right.appendChild(useredit);\r\n            right.appendChild(userdelete);\r\n            parent.appendChild(left);\r\n            parent.appendChild(right);\r\n    \r\n            users.appendChild(parent);\r\n            \r\n        })\r\n    }\r\n    \r\n    users.addEventListener(\"click\", function(event){\r\n        const target = event.target as HTMLElement | null;\r\n        const parent = target?.closest(\".parent\") as HTMLDivElement;\r\n        if(target && target.matches(\".edit\")){\r\n            const userId = parent.getAttribute('userId');\r\n            sessionStorage.setItem('userId', userId!);\r\n            window.location.href='update-user.html';\r\n        }\r\n        if(target && target.matches(\".delete\")){\r\n            const status = confirm(\"Are you sure you want to delete a user\");\r\n            if(status){\r\n                userList = userList.filter(user => user.email !== parent.getAttribute('email'));\r\n                displayUsers(userList);\r\n                updatedUser(userList);\r\n            }    \r\n        }\r\n    })\r\n    \r\n    const logout = document.getElementById(\"logout\") as HTMLButtonElement;\r\n    \r\n    logout.addEventListener(\"click\", function(){\r\n        sessionStorage.clear();\r\n        window.location.replace('../index.html');\r\n    })\r\n    \r\n    const backUp = document.getElementById(\"backup\") as HTMLButtonElement;\r\n    const restore = document.getElementById(\"restore\") as HTMLButtonElement;\r\n    const fileInput = document.getElementById(\"file-input\") as HTMLInputElement;\r\n    \r\n    backUp.addEventListener(\"click\", function() {\r\n        backupLocalStorage();\r\n    });\r\n    \r\n    restore.addEventListener(\"click\", function() {\r\n        fileInput.click();\r\n    });\r\n    \r\n    fileInput.addEventListener(\"change\", function(event) {\r\n        const file = (event.target as HTMLInputElement).files?.[0];\r\n        if (file) {\r\n            restoreLocalStorage(file);\r\n        }\r\n    });\r\n    \r\n    \r\n    function backupLocalStorage(): void {\r\n        const keys = Object.keys(localStorage);\r\n        const backupData: { [key: string]: any } = {};\r\n        keys.forEach(key => {\r\n            backupData[key] = localStorage.getItem(key);\r\n        });\r\n        const jsonBackupData = JSON.stringify(backupData, null, 2);\r\n        const blob = new Blob([jsonBackupData], { type: 'application/json' });\r\n        const link = document.createElement('a');\r\n        link.href = URL.createObjectURL(blob);\r\n        link.download = 'backup.json';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    \r\n        alert('Backup completed and saved as file');\r\n    }\r\n    \r\n    function restoreLocalStorage(file: File): void {\r\n        const reader = new FileReader();\r\n    \r\n        reader.onload = function(event) {\r\n            const backupData = JSON.parse(event.target?.result as string);\r\n            Object.keys(backupData).forEach(key => {\r\n                localStorage.setItem(key, backupData[key]);\r\n            });\r\n            alert('Restore completed successfully');\r\n            window.location.reload();\r\n        };\r\n    \r\n        reader.readAsText(file);\r\n    }\r\n}\r\n"],"names":[],"sourceRoot":""}